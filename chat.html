<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cella AI - Asisten Cerdas</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background-color: #0d0f1a;
      font-family: 'Segoe UI', sans-serif;
      color: #fff;
    }

    #preloader {
      position: fixed;
      width: 100%;
      height: 100%;
      background: #0d0f1a;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    .logo-animated {
      width: 100px;
      animation: rotate 3s infinite ease-in-out;
      border-radius: 20px;
      box-shadow: 0 6px 16px rgba(85, 241, 210, 0.4);
    }
    .loading-bar {
      width: 100px;
      height: 6px;
      margin-top: 20px;
      background: #222;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }
    .loading-bar::before {
      content: "";
      position: absolute;
      width: 40%;
      height: 100%;
      background: linear-gradient(to right, #8758ff, #55f1d2);
      animation: loading 2s infinite;
    }
    @keyframes loading {
      0% { left: -40%; }
      100% { left: 100%; }
    }
    @keyframes rotate {
      0%, 100% { transform: rotate(-10deg); }
      50% { transform: rotate(10deg); }
    }

    .container {
      padding: 100px 20px 80px;
      text-align: center;
    }
    h1 {
      font-size: 1.8rem;
      margin: 20px 0;
    }

    .prompt-buttons {
      margin: 20px auto;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    .prompt-buttons button {
      padding: 10px 20px;
      background: #1e1f2f;
      color: #fff;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .prompt-buttons button:hover {
      background: #282a3f;
    }

    .chat-messages {
      max-height: 60vh;
      overflow-y: auto;
      padding: 20px 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .chat-bubble-wrapper {
      display: flex;
      width: 100%;
    }
    .chat-bubble {
      max-width: 75%;
      padding: 10px 14px;
      border-radius: 18px;
      font-size: 0.95rem;
      line-height: 1.4;
      word-wrap: break-word;
      white-space: pre-wrap;
    }
    .user-wrapper {
      justify-content: flex-end;
    }
    .user {
      background-color: #8758ff;
      color: white;
      border-bottom-right-radius: 0;
    }
    .bot-wrapper {
      justify-content: flex-start;
    }
    .bot {
      background-color: #222;
      color: #55f1d2;
      border-bottom-left-radius: 0;
    }

    .loading-spinner {
      width: 22px;
      height: 22px;
      border: 3px solid #55f1d2;
      border-top: 3px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-left: 12px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .chat-input {
      position: fixed;
      bottom: 0;
      width: 100%;
      display: flex;
      padding: 10px;
      background: #11121c;
      border-top: 1px solid #222;
    }
    .chat-input textarea {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: none;
      background: #1e1f2f;
      color: white;
      resize: none;
    }
    .chat-input button {
      background: #8758ff;
      color: white;
      border: none;
      margin-left: 10px;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .file-upload {
      background: #1e1f2f;
      color: white;
      margin-left: 10px;
      border: none;
      border-radius: 10px;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .file-upload input {
      display: none;
    }

    .clear-button {
      position: fixed;
      bottom: 70px;
      right: 20px;
      z-index: 999;
      padding: 10px 18px;
      background: #ff4d4d;
      border: none;
      border-radius: 15px;
      color: white;
      cursor: pointer;
      font-size: 0.9rem;
      box-shadow: 0 0 10px rgba(255, 77, 77, 0.4);
    }

    .top-logo {
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 999;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .top-logo img {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(85, 241, 210, 0.4);
    }
  </style>
</head>
<body>
  <div class="top-logo">
    <img src="https://files.catbox.moe/11951e.jpeg" alt="Logo" />
    <span style="font-weight: bold; color: #55f1d2;">Cella AI</span>
  </div>

  <div id="preloader">
    <img src="https://files.catbox.moe/11951e.jpeg" alt="Cella AI" class="logo-animated" />
    <h1>Cella <span style="color:#55f1d2">AI</span></h1>
    <div class="loading-bar"></div>
  </div>

  <div class="container">
    <img src="https://files.catbox.moe/11951e.jpeg" alt="Cella AI" style="width:100px; border-radius: 20px; box-shadow: 0 6px 16px rgba(85, 241, 210, 0.4);" />
    <h1>Halo! Saya Cella AI. Silahkan kirim pesan atau gambar anda di bawah.</h1>
    <div class="prompt-buttons">
      <button onclick="window.open('https://t.me/rugibanget', '_blank')">Contact Owner</button>
    </div>
    <div class="chat-messages" id="chat-box"></div>
  </div>

  <button class="clear-button" onclick="clearChat()">Clear</button>

  <div class="chat-input">
    <textarea id="input" placeholder="Ketik pesan..." rows="1"></textarea>
    <label class="file-upload">
      <i class="fa fa-paperclip"></i>
      <input type="file" accept="image/*" onchange="uploadImage(this)">
    </label>
    <button onclick="handleSend()"><i class="fa fa-paper-plane"></i></button>
  </div>

  <script>
    window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("preloader").style.display = "none";
      }, 1500);
    });

    function addBubble(text, sender = "user") {
      const chatBox = document.getElementById("chat-box");
      const wrapper = document.createElement("div");
      wrapper.className = `chat-bubble-wrapper ${sender}-wrapper`;

      const bubble = document.createElement("div");
      bubble.className = `chat-bubble ${sender}`;
      bubble.innerHTML = text;

      wrapper.appendChild(bubble);
      chatBox.appendChild(wrapper);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function addLoadingBubble() {
      const chatBox = document.getElementById("chat-box");
      const wrapper = document.createElement("div");
      wrapper.className = "chat-bubble-wrapper bot-wrapper";
      wrapper.id = "loading-bubble";

      const spinner = document.createElement("div");
      spinner.className = "loading-spinner";

      wrapper.appendChild(spinner);
      chatBox.appendChild(wrapper);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function removeLoadingBubble() {
      const loading = document.getElementById("loading-bubble");
      if (loading) loading.remove();
    }

    async function sendText(text) {
      addBubble(text, "user");
      addLoadingBubble();

      try {
        const response = await axios.post(
          "https://chateverywhere.app/api/chat/",
          {
            model: {
              id: "gpt-4",
              name: "GPT-4",
              maxLength: 32000,
              tokenLimit: 8000,
              completionTokenLimit: 5000,
              deploymentName: "gpt-4",
            },
            messages: [{ content: text, role: "user" }],
            prompt: "",
            temperature: 0.5,
          },
          {
            headers: {
              Accept: "*/*",
              "User-Agent":
                "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Mobile Safari/537.36",
            },
          }
        );

        const reply = response?.data?.result || "‚ö†Ô∏è Tidak ada balasan.";
        removeLoadingBubble();
        addBubble(reply, "bot");
      } catch (error) {
        removeLoadingBubble();
        addBubble("‚ö†Ô∏è Gagal mengambil respons dari AI.", "bot");
        console.error(error);
      }
    }

    function handleSend() {
      const input = document.getElementById("input");
      const text = input.value.trim();
      if (text !== "") {
        sendText(text);
        input.value = "";
      }
    }

    async function uploadImage(input) {
      const file = input.files[0];
      if (!file) return;

      addBubble("üì∑ Mengunggah gambar...", "user");
      addLoadingBubble();

      const form = new FormData();
      form.append("reqtype", "fileupload");
      form.append("fileToUpload", file);

      try {
        const res = await axios.post("https://catbox.moe/user/api.php", form, {
          headers: { "Content-Type": "multipart/form-data" }
        });

        const imageUrl = res.data;
        removeLoadingBubble();
        sendText(`Ini gambar saya:\n${imageUrl}`);
      } catch {
        removeLoadingBubble();
        addBubble("‚ö†Ô∏è Gagal mengunggah gambar.", "bot");
      }
    }

    function clearChat() {
      document.getElementById("chat-box").innerHTML = "";
    }

    document.getElementById("input").addEventListener("keydown", function(e) {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        handleSend();
      }
    });
  </script>
</body>
</html>
